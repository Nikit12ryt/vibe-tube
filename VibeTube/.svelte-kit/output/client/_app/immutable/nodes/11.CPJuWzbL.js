import{f as w,a as c,c as Ps,t as ya}from"../chunks/b5zj641C.js";import{i as Us}from"../chunks/CPnGWO-2.js";import{o as Ws}from"../chunks/Bvetg77p.js";import{h as P,i as Ys,M as Fs,b as Gs,N as Ka,O as Qs,d as Xs,P as Zs,s as wa,Q as Js,R as ka,S as as,n as y,T as Ks,U as at,V as st,W as tt,X as et,Y as rt,p as it,l as ss,j as vt,t as g,k as lt,o as a,y as dt,q as t,m as N,$ as nt,r,u as s,v as i,f as ts}from"../chunks/BM2AIrRx.js";import{s as v}from"../chunks/D17zy_22.js";import{B as ot,i as U,a as ct,b as _t}from"../chunks/BLbrYCs1.js";import{V as W,l as ft,t as ut,e as pt,b as Ta,i as mt}from"../chunks/C02I7yOd.js";import{h as ht}from"../chunks/DMkD6tIR.js";import{H as xt}from"../chunks/aIAfHqPP.js";import{C as bt,M as es}from"../chunks/C5R3uk5n.js";import{T as gt}from"../chunks/DiCDuPrh.js";import{E as yt}from"../chunks/CLs_Kqkd.js";import{T as wt}from"../chunks/ynn_0b1h.js";const rs=0,Va=1;function kt(A,Y,C,$,M){P&&Ys();var f=Fs(),e=rt,_=f?as(e):y(e,!1,!1),o=f?as(e):y(e,!1,!1),u=new ot(A);Gs(()=>{var k=Y(),I=!1;let R=P&&Ka(k)===(A.data===Qs);if(R&&(Xs(Zs()),wa(!1)),Ka(k)){var H=Ks(),S=!1;const h=m=>{if(!I){S=!0,H(!1),at.ensure(),P&&wa(!1);try{m()}finally{st(),tt||et()}}};k.then(m=>{h(()=>{ka(_,m),u.ensure(Va,$&&(D=>$(D,_)))})},m=>{h(()=>{if(ka(o,m),u.ensure(Va,M&&(D=>M(D,o))),!M)throw o.v})}),P?u.ensure(rs,C):Js(()=>{S||h(()=>{u.ensure(rs,C)})})}else ka(_,k),u.ensure(Va,$&&(h=>$(h,_)));return R&&wa(!0),()=>{I=!0}})}var Tt=w('<div class="loading svelte-1d4i12f"> </div>'),Vt=w('<div class="empty-state svelte-1d4i12f"><!> <p> </p> <a href="/upload" class="btn-primary"> </a></div>'),zt=w('<img class="svelte-1d4i12f"/>'),$t=w('<div class="no-thumb svelte-1d4i12f"><!></div>'),It=w('<tr><td class="video-cell svelte-1d4i12f"><a class="svelte-1d4i12f"><!> <span class="svelte-1d4i12f"> </span></a></td><td class="svelte-1d4i12f"> </td><td class="svelte-1d4i12f"> </td><td class="svelte-1d4i12f"><!></td><td class="svelte-1d4i12f"> </td></tr>'),St=w('<div class="videos-table svelte-1d4i12f"><table class="svelte-1d4i12f"><thead><tr><th class="svelte-1d4i12f"> </th><th class="svelte-1d4i12f"> </th><th class="svelte-1d4i12f"> </th><th class="svelte-1d4i12f"> </th><th class="svelte-1d4i12f"> </th></tr></thead><tbody></tbody></table></div>'),Dt=w('<div class="stats-grid svelte-1d4i12f"><div class="stat-card svelte-1d4i12f"><div class="stat-icon views svelte-1d4i12f"><!></div> <div class="stat-content svelte-1d4i12f"><span class="stat-label svelte-1d4i12f"> </span> <span class="stat-value svelte-1d4i12f"> </span></div></div> <div class="stat-card svelte-1d4i12f"><div class="stat-icon videos svelte-1d4i12f"><!></div> <div class="stat-content svelte-1d4i12f"><span class="stat-label svelte-1d4i12f"> </span> <span class="stat-value svelte-1d4i12f"> </span></div></div> <div class="stat-card svelte-1d4i12f"><div class="stat-icon likes svelte-1d4i12f"><!></div> <div class="stat-content svelte-1d4i12f"><span class="stat-label svelte-1d4i12f"> </span> <span class="stat-value svelte-1d4i12f"> </span></div></div> <div class="stat-card svelte-1d4i12f"><div class="stat-icon comments svelte-1d4i12f"><!></div> <div class="stat-content svelte-1d4i12f"><span class="stat-label svelte-1d4i12f"> </span> <span class="stat-value svelte-1d4i12f"> </span></div></div></div> <div class="recent-section svelte-1d4i12f"><div class="section-header svelte-1d4i12f"><h2 class="svelte-1d4i12f"> </h2> <a href="/studio/videos" class="btn-secondary"> </a></div> <!></div>',1),Et=w('<div class="studio svelte-1d4i12f"><!> <div class="studio-layout svelte-1d4i12f"><aside class="studio-sidebar svelte-1d4i12f"><nav class="svelte-1d4i12f"><a href="/studio" class="active svelte-1d4i12f"><!> <span> </span></a> <a href="/studio/videos" class="svelte-1d4i12f"><!> <span> </span></a> <a href="/studio/comments" class="svelte-1d4i12f"><!> <span> </span></a> <a href="/studio/analytics" class="svelte-1d4i12f"><!> <span> </span></a></nav></aside> <main class="studio-main svelte-1d4i12f"><div class="studio-header svelte-1d4i12f"><h1 class="svelte-1d4i12f"> </h1> <p class="svelte-1d4i12f"> </p></div> <!></main></div></div>');function Wt(A,Y){it(Y,!1);const C=()=>_t(ft,"$language",$),[$,M]=ct(),f=y(),e=y();let _=y(null),o=y(null),u=y([]),k=y(!0);Ws(async()=>{const p=await fetch("/api/auth/me");if(!p.ok){window.location.href="/login";return}const x=await p.json();N(_,x.user);const E=await fetch("/api/studio/stats");if(E.ok){const T=await E.json();N(o,T)}const q=await fetch(`/api/videos?userId=${a(_).id}&limit=5`);if(q.ok){const T=await q.json();N(u,T.videos)}N(k,!1)}),ss(()=>C(),()=>{N(f,C())}),ss(()=>a(f),()=>{N(e,ut[a(f)])}),vt(),Us();var I=Et();ht("1d4i12f",p=>{dt(()=>{nt.title="Creator Studio - VibeTube"})});var R=t(I);xt(R,{get user(){return a(_)},onMenuClick:()=>{}});var H=r(R,2),S=t(H),h=t(S),m=t(h),D=t(m);bt(D,{size:20});var za=r(D,2),is=t(za,!0);s(za),s(m);var F=r(m,2),$a=t(F);W($a,{size:20});var Ia=r($a,2),vs=t(Ia,!0);s(Ia),s(F);var G=r(F,2),Sa=t(G);es(Sa,{size:20});var Da=r(Sa,2),ls=t(Da,!0);s(Da),s(G);var Ea=r(G,2),La=t(Ea);gt(La,{size:20});var Na=r(La,2),ds=t(Na,!0);s(Na),s(Ea),s(h),s(S);var Ca=r(S,2),Q=t(Ca),X=t(Q),ns=t(X,!0);s(X);var Ma=r(X,2),os=t(Ma,!0);s(Ma),s(Q);var cs=r(Q,2);{var _s=p=>{var x=Tt(),E=t(x,!0);s(x),g(()=>v(E,(a(e),i(()=>a(e).loading)))),c(p,x)},fs=p=>{var x=Ps(),E=ts(x);{var q=T=>{var Ra=Dt(),Z=ts(Ra),J=t(Z),K=t(J),us=t(K);yt(us,{size:24}),s(K);var ja=r(K,2),aa=t(ja),ps=t(aa,!0);s(aa);var Aa=r(aa,2),ms=t(Aa,!0);s(Aa),s(ja),s(J);var sa=r(J,2),ta=t(sa),hs=t(ta);W(hs,{size:24}),s(ta);var Ha=r(ta,2),ea=t(Ha),xs=t(ea,!0);s(ea);var qa=r(ea,2),bs=t(qa,!0);s(qa),s(Ha),s(sa);var ra=r(sa,2),ia=t(ra),gs=t(ia);wt(gs,{size:24}),s(ia);var Ba=r(ia,2),va=t(Ba),ys=t(va,!0);s(va);var Oa=r(va,2),ws=t(Oa,!0);s(Oa),s(Ba),s(ra);var Pa=r(ra,2),la=t(Pa),ks=t(la);es(ks,{size:24}),s(la);var Ua=r(la,2),da=t(Ua),Ts=t(da,!0);s(da);var Wa=r(da,2),Vs=t(Wa,!0);s(Wa),s(Ua),s(Pa),s(Z);var Ya=r(Z,2),na=t(Ya),oa=t(na),zs=t(oa,!0);s(oa);var Fa=r(oa,2),$s=t(Fa,!0);s(Fa),s(na);var Is=r(na,2);{var Ss=b=>{var V=Vt(),j=t(V);W(j,{size:48});var z=r(j,2),B=t(z,!0);s(z);var L=r(z,2),ca=t(L,!0);s(L),s(V),g(()=>{v(B,(a(e),i(()=>a(e).noVideos))),v(ca,(a(e),i(()=>a(e).uploadFirst)))}),c(b,V)},Ds=b=>{var V=St(),j=t(V),z=t(j),B=t(z),L=t(B),ca=t(L,!0);s(L);var _a=r(L),Es=t(_a,!0);s(_a);var fa=r(_a),Ls=t(fa,!0);s(fa);var ua=r(fa),Ns=t(ua,!0);s(ua);var Ga=r(ua),Cs=t(Ga,!0);s(Ga),s(B),s(z);var Qa=r(z);pt(Qa,5,()=>a(u),mt,(Ms,l)=>{var pa=It(),ma=t(pa),ha=t(ma),Xa=t(ha);{var Rs=d=>{var n=zt();g(()=>{Ta(n,"src",(a(l),i(()=>a(l).thumbnail_url))),Ta(n,"alt",(a(l),i(()=>a(l).title)))}),c(d,n)},js=d=>{var n=$t(),O=t(n);W(O,{size:20}),s(n),c(d,n)};U(Xa,d=>{a(l),i(()=>a(l).thumbnail_url)?d(Rs):d(js,!1)})}var Za=r(Xa,2),As=t(Za,!0);s(Za),s(ha),s(ma);var xa=r(ma),Hs=t(xa,!0);s(xa);var ba=r(xa),qs=t(ba,!0);s(ba);var ga=r(ba),Bs=t(ga);kt(Bs,()=>(a(l),i(()=>fetch(`/api/comments?videoId=${a(l).id}`).then(d=>d.json()).then(d=>d.comments?.length||0))),d=>{var n=ya("...");c(d,n)},(d,n)=>{var O=ya();g(()=>v(O,a(n))),c(d,O)},d=>{var n=ya("0");c(d,n)}),s(ga);var Ja=r(ga),Os=t(Ja,!0);s(Ja),s(pa),g((d,n)=>{Ta(ha,"href",`/watch/${a(l),i(()=>a(l).id)??""}`),v(As,(a(l),i(()=>a(l).title))),v(Hs,d),v(qs,(a(l),i(()=>a(l).likes||0))),v(Os,n)},[()=>(a(l),i(()=>a(l).views?.toLocaleString()||0)),()=>(a(l),i(()=>new Date(a(l).created_at).toLocaleDateString()))]),c(Ms,pa)}),s(Qa),s(j),s(V),g(()=>{v(ca,(a(e),i(()=>a(e).video))),v(Es,(a(e),i(()=>a(e).views))),v(Ls,(a(e),i(()=>a(e).likes))),v(Ns,(a(e),i(()=>a(e).comments))),v(Cs,a(f)==="ru"?"Дата":"Date")}),c(b,V)};U(Is,b=>{a(u),i(()=>a(u).length===0)?b(Ss):b(Ds,!1)})}s(Ya),g(b=>{v(ps,(a(e),i(()=>a(e).totalViews))),v(ms,b),v(xs,(a(e),i(()=>a(e).videos))),v(bs,(a(o),i(()=>a(o).totalVideos||0))),v(ys,(a(e),i(()=>a(e).totalLikes))),v(ws,(a(o),i(()=>a(o).totalLikes||0))),v(Ts,(a(e),i(()=>a(e).comments))),v(Vs,(a(o),i(()=>a(o).totalComments||0))),v(zs,(a(e),i(()=>a(e).latestVideos))),v($s,a(f)==="ru"?"Показать все":"View All")},[()=>(a(o),i(()=>a(o).totalViews?.toLocaleString()||0))]),c(T,Ra)};U(E,T=>{a(o)&&T(q)},!0)}c(p,x)};U(cs,p=>{a(k)?p(_s):p(fs,!1)})}s(Ca),s(H),s(I),g(()=>{v(is,(a(e),i(()=>a(e).dashboard))),v(vs,(a(e),i(()=>a(e).content))),v(ls,(a(e),i(()=>a(e).comments))),v(ds,(a(e),i(()=>a(e).analytics))),v(ns,(a(e),i(()=>a(e).dashboard))),v(os,(a(f),a(_),i(()=>a(f)==="ru"?`Добро пожаловать, ${a(_)?.username||"Создатель"}!`:`Welcome back, ${a(_)?.username||"Creator"}!`)))}),c(A,I),lt(),M()}export{Wt as component};
