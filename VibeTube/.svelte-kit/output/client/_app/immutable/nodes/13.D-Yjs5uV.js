import{f,a as m,c as fa}from"../chunks/b5zj641C.js";import{i as ba}from"../chunks/CPnGWO-2.js";import{o as ga}from"../chunks/Bvetg77p.js";import{p as ha,l as W,j as qa,t as h,k as xa,o as a,n as _,y as ya,q as e,m as u,$ as $a,r as o,u as s,v as i,f as ka}from"../chunks/BM2AIrRx.js";import{s as v,e as wa}from"../chunks/D17zy_22.js";import{i as X,a as Ca,b as za}from"../chunks/BLbrYCs1.js";import{V as Ma,l as Ta,t as ja,e as Da,i as Ea}from"../chunks/C02I7yOd.js";import{h as Ha}from"../chunks/DMkD6tIR.js";import{H as Va}from"../chunks/aIAfHqPP.js";import{C as La,M as Ra}from"../chunks/C5R3uk5n.js";import{T as Sa}from"../chunks/DiCDuPrh.js";import{T as Ya}from"../chunks/DkhSqydq.js";var Aa=f('<div class="loading svelte-qpbc56"> </div>'),Ba=f('<div class="empty svelte-qpbc56"> </div>'),Fa=f('<div class="comment-item svelte-qpbc56"><div class="comment-content svelte-qpbc56"><strong class="svelte-qpbc56"> </strong> <p class="svelte-qpbc56"> </p> <span class="meta svelte-qpbc56"> </span></div> <button class="btn-icon danger svelte-qpbc56"><!></button></div>'),Ga=f('<div class="comments-list svelte-qpbc56"></div>'),Ja=f('<div class="studio svelte-qpbc56"><!> <div class="studio-layout svelte-qpbc56"><aside class="studio-sidebar svelte-qpbc56"><nav class="svelte-qpbc56"><a href="/studio" class="svelte-qpbc56"><!> <span> </span></a> <a href="/studio/videos" class="svelte-qpbc56"><!> <span> </span></a> <a href="/studio/comments" class="active svelte-qpbc56"><!> <span> </span></a> <a href="/studio/analytics" class="svelte-qpbc56"><!> <span> </span></a></nav></aside> <main class="studio-main svelte-qpbc56"><h1 class="svelte-qpbc56"> </h1> <!></main></div></div>');function es(Z,I){ha(I,!1);const H=()=>za(Ta,"$language",aa),[aa,sa]=Ca(),b=_(),t=_();let V=_(null),p=_([]),L=_(!0);ga(async()=>{const r=await fetch("/api/auth/me");if(!r.ok){window.location.href="/login";return}u(V,(await r.json()).user);const n=await fetch("/api/studio/comments");n.ok&&u(p,(await n.json()).comments),u(L,!1)});async function ea(r){const n=a(b)==="ru"?"Удалить этот комментарий?":"Delete this comment?";if(!confirm(n))return;(await fetch(`/api/comments/${r}`,{method:"DELETE"})).ok&&u(p,a(p).filter(C=>C.id!==r))}W(()=>H(),()=>{u(b,H())}),W(()=>a(b),()=>{u(t,ja[a(b)])}),qa(),ba();var q=Ja();Ha("qpbc56",r=>{ya(()=>{$a.title="Comments - Creator Studio"})});var R=e(q);Va(R,{get user(){return a(V)},onMenuClick:()=>{}});var S=o(R,2),x=e(S),Y=e(x),y=e(Y),A=e(y);La(A,{size:20});var B=o(A,2),ta=e(B,!0);s(B),s(y);var $=o(y,2),F=e($);Ma(F,{size:20});var G=o(F,2),ra=e(G,!0);s(G),s($);var k=o($,2),J=e(k);Ra(J,{size:20});var K=o(J,2),oa=e(K,!0);s(K),s(k);var N=o(k,2),O=e(N);Sa(O,{size:20});var P=o(O,2),ia=e(P,!0);s(P),s(N),s(Y),s(x);var Q=o(x,2),w=e(Q),na=e(w,!0);s(w);var va=o(w,2);{var ca=r=>{var n=Aa(),g=e(n,!0);s(n),h(()=>v(g,(a(t),i(()=>a(t).loading)))),m(r,n)},la=r=>{var n=fa(),g=ka(n);{var C=d=>{var c=Ba(),z=e(c,!0);s(c),h(()=>v(z,(a(t),i(()=>a(t).noCommentsYet)))),m(d,c)},pa=d=>{var c=Ga();Da(c,5,()=>a(p),Ea,(z,l)=>{var M=Fa(),T=e(M),j=e(T),da=e(j,!0);s(j);var D=o(j,2),ma=e(D,!0);s(D);var U=o(D,2),ua=e(U);s(U),s(T);var E=o(T,2),_a=e(E);Ya(_a,{size:18}),s(E),s(M),h(()=>{v(da,(a(l),i(()=>a(l).username))),v(ma,(a(l),i(()=>a(l).content))),v(ua,`${a(t),i(()=>a(t).on)??""}: ${a(l),i(()=>a(l).video_title)??""}`)}),wa("click",E,()=>ea(a(l).id)),m(z,M)}),s(c),m(d,c)};X(g,d=>{a(p),i(()=>a(p).length===0)?d(C):d(pa,!1)},!0)}m(r,n)};X(va,r=>{a(L)?r(ca):r(la,!1)})}s(Q),s(S),s(q),h(()=>{v(ta,(a(t),i(()=>a(t).dashboard))),v(ra,(a(t),i(()=>a(t).content))),v(oa,(a(t),i(()=>a(t).comments))),v(ia,(a(t),i(()=>a(t).analytics))),v(na,(a(t),i(()=>a(t).comments)))}),m(Z,q),xa(),sa()}export{es as component};
