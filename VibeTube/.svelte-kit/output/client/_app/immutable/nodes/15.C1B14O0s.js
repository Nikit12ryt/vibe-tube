import{c as ga,a as c,f}from"../chunks/b5zj641C.js";import{i as Ra}from"../chunks/CPnGWO-2.js";import{o as Ba}from"../chunks/Bvetg77p.js";import{f as ba,p as Fa,l as ha,j as Ga,t as w,k as Ja,o as a,n as z,y as Ka,q as e,m as g,$ as Oa,r as o,u as s,v as n}from"../chunks/BM2AIrRx.js";import{s as v,e as Qa}from"../chunks/D17zy_22.js";import{l as Ua,s as Wa,i as W,a as Xa,b as Ya}from"../chunks/BLbrYCs1.js";import{I as Za,V as X,l as as,t as ss,e as es,b as k,i as ts}from"../chunks/C02I7yOd.js";import{h as rs}from"../chunks/DMkD6tIR.js";import{H as os}from"../chunks/aIAfHqPP.js";import{C as ns,M as is}from"../chunks/C5R3uk5n.js";import{T as vs}from"../chunks/DiCDuPrh.js";import{E as ls}from"../chunks/CLs_Kqkd.js";import{T as cs}from"../chunks/ynn_0b1h.js";import{s as us}from"../chunks/Doq7kNre.js";import{T as ds}from"../chunks/DkhSqydq.js";function ms(q,M){const T=Ua(M,["children","$$slots","$$events","$$legacy"]);const S=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];Za(q,Wa({name:"square-pen"},()=>T,{get iconNode(){return S},children:(j,u)=>{var t=ga(),b=ba(t);us(b,M,"default",{}),c(j,t)},$$slots:{default:!0}}))}var _s=f('<div class="loading svelte-1nmuyco"> </div>'),ps=f('<div class="empty-state svelte-1nmuyco"><!> <h2> </h2> <p> </p> <a href="/upload" class="btn-primary"> </a></div>'),fs=f('<img class="svelte-1nmuyco"/>'),ys=f('<div class="no-thumb svelte-1nmuyco"><!></div>'),hs=f('<div class="video-item svelte-1nmuyco"><div class="video-thumbnail svelte-1nmuyco"><!></div> <div class="video-info svelte-1nmuyco"><h3 class="svelte-1nmuyco"> </h3> <p class="video-desc svelte-1nmuyco"> </p> <div class="video-stats svelte-1nmuyco"><span class="svelte-1nmuyco"><!> </span> <span class="svelte-1nmuyco"><!> </span> <span class="svelte-1nmuyco"> </span></div></div> <div class="video-actions svelte-1nmuyco"><a class="btn-icon svelte-1nmuyco"><!></a> <button class="btn-icon danger svelte-1nmuyco"><!></button></div></div>'),gs=f('<div class="videos-list svelte-1nmuyco"></div>'),bs=f('<div class="studio svelte-1nmuyco"><!> <div class="studio-layout svelte-1nmuyco"><aside class="studio-sidebar svelte-1nmuyco"><nav class="svelte-1nmuyco"><a href="/studio" class="svelte-1nmuyco"><!> <span> </span></a> <a href="/studio/videos" class="active svelte-1nmuyco"><!> <span> </span></a> <a href="/studio/comments" class="svelte-1nmuyco"><!> <span> </span></a> <a href="/studio/analytics" class="svelte-1nmuyco"><!> <span> </span></a></nav></aside> <main class="studio-main svelte-1nmuyco"><div class="studio-header svelte-1nmuyco"><h1 class="svelte-1nmuyco"> </h1> <a href="/upload" class="btn-primary"> </a></div> <!></main></div></div>');function Ns(q,M){Fa(M,!1);const T=()=>Ya(as,"$language",S),[S,j]=Xa(),u=z(),t=z();let b=z(null),y=z([]),Y=z(!0);Ba(async()=>{const i=await fetch("/api/auth/me");if(!i.ok){window.location.href="/login";return}const l=await i.json();g(b,l.user),await $a()});async function $a(){const i=await fetch(`/api/videos?userId=${a(b).id}`);if(i.ok){const l=await i.json();g(y,l.videos)}g(Y,!1)}async function xa(i){const l=a(u)==="ru"?"Вы уверены, что хотите удалить это видео?":"Are you sure you want to delete this video?";if(!confirm(l))return;(await fetch(`/api/videos/${i}`,{method:"DELETE"})).ok&&g(y,a(y).filter(B=>B.id!==i))}ha(()=>T(),()=>{g(u,T())}),ha(()=>a(u),()=>{g(t,ss[a(u)])}),Ga(),Ra();var H=bs();rs("1nmuyco",i=>{Ka(()=>{Oa.title="Content - Creator Studio"})});var Z=e(H);os(Z,{get user(){return a(b)},onMenuClick:()=>{}});var aa=o(Z,2),N=e(aa),sa=e(N),I=e(sa),ea=e(I);ns(ea,{size:20});var ta=o(ea,2),wa=e(ta,!0);s(ta),s(I);var L=o(I,2),ra=e(L);X(ra,{size:20});var oa=o(ra,2),za=e(oa,!0);s(oa),s(L);var A=o(L,2),na=e(A);is(na,{size:20});var ia=o(na,2),ka=e(ia,!0);s(ia),s(A);var va=o(A,2),la=e(va);vs(la,{size:20});var ca=o(la,2),Ma=e(ca,!0);s(ca),s(va),s(sa),s(N);var ua=o(N,2),P=e(ua),R=e(P),Ta=e(R,!0);s(R);var da=o(R,2),Va=e(da,!0);s(da),s(P);var Ca=o(P,2);{var Da=i=>{var l=_s(),V=e(l,!0);s(l),w(()=>v(V,(a(t),n(()=>a(t).loading)))),c(i,l)},Ea=i=>{var l=ga(),V=ba(l);{var B=h=>{var m=ps(),C=e(m);X(C,{size:64});var r=o(C,2),$=e(r,!0);s(r);var _=o(r,2),F=e(_,!0);s(_);var D=o(_,2),G=e(D,!0);s(D),s(m),w(()=>{v($,(a(t),n(()=>a(t).noVideos))),v(F,a(u)==="ru"?"Начните с загрузки первого видео":"Start by uploading your first video"),v(G,(a(t),n(()=>a(t).uploadVideo)))}),c(h,m)},qa=h=>{var m=gs();es(m,5,()=>a(y),ts,(C,r)=>{var $=hs(),_=e($),F=e(_);{var D=d=>{var p=fs();w(()=>{k(p,"src",(a(r),n(()=>a(r).thumbnail_url))),k(p,"alt",(a(r),n(()=>a(r).title)))}),c(d,p)},G=d=>{var p=ys(),Pa=e(p);X(Pa,{size:32}),s(p),c(d,p)};W(F,d=>{a(r),n(()=>a(r).thumbnail_url)?d(D):d(G,!1)})}s(_);var J=o(_,2),K=e(J),Sa=e(K,!0);s(K);var O=o(K,2),ja=e(O,!0);s(O);var ma=o(O,2),Q=e(ma),_a=e(Q);ls(_a,{size:14});var Ha=o(_a);s(Q);var U=o(Q,2),pa=e(U);cs(pa,{size:14});var Na=o(pa);s(U);var fa=o(U,2),Ia=e(fa,!0);s(fa),s(ma),s(J);var ya=o(J,2),x=e(ya),La=e(x);ms(La,{size:18}),s(x);var E=o(x,2),Aa=e(E);ds(Aa,{size:18}),s(E),s(ya),s($),w(d=>{v(Sa,(a(r),n(()=>a(r).title))),v(ja,(a(r),a(u),n(()=>a(r).description||(a(u)==="ru"?"Нет описания":"No description")))),v(Ha,` ${a(r),n(()=>a(r).views)??""} ${a(t),n(()=>a(t).views)??""}`),v(Na,` ${a(r),n(()=>a(r).likes||0)??""} ${a(t),n(()=>a(t).likes)??""}`),v(Ia,d),k(x,"href",`/studio/edit/${a(r),n(()=>a(r).id)??""}`),k(x,"title",(a(t),n(()=>a(t).edit))),k(E,"title",(a(t),n(()=>a(t).delete)))},[()=>(a(r),n(()=>new Date(a(r).created_at).toLocaleDateString()))]),Qa("click",E,()=>xa(a(r).id)),c(C,$)}),s(m),c(h,m)};W(V,h=>{a(y),n(()=>a(y).length===0)?h(B):h(qa,!1)},!0)}c(i,l)};W(Ca,i=>{a(Y)?i(Da):i(Ea,!1)})}s(ua),s(aa),s(H),w(()=>{v(wa,(a(t),n(()=>a(t).dashboard))),v(za,(a(t),n(()=>a(t).content))),v(ka,(a(t),n(()=>a(t).comments))),v(Ma,(a(t),n(()=>a(t).analytics))),v(Ta,(a(t),n(()=>a(t).content))),v(Va,(a(t),n(()=>a(t).uploadVideo)))}),c(q,H),Ja(),j()}export{Ns as component};
