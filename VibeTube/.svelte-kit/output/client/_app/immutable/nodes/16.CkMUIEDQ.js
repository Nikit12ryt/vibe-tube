import{f as $,a as d,c as J}from"../chunks/b5zj641C.js";import{i as K}from"../chunks/CPnGWO-2.js";import{o as L}from"../chunks/Bvetg77p.js";import{p as N,l as O,j as P,t as w,k as Q,o as a,n as i,y as U,m as n,q as l,r as y,$ as W,u as v,v as f,f as X}from"../chunks/BM2AIrRx.js";import{s as z}from"../chunks/D17zy_22.js";import{i as S,a as Y,b as Z}from"../chunks/BLbrYCs1.js";import{h as aa}from"../chunks/DMkD6tIR.js";import{l as ea,t as sa,s as ta}from"../chunks/C02I7yOd.js";import{H as ra}from"../chunks/aIAfHqPP.js";import{S as oa}from"../chunks/BcVKEG13.js";import{V as ia}from"../chunks/DQflonDh.js";var na=$('<div class="loading svelte-1aizo1m"> </div>'),la=$('<div class="empty svelte-1aizo1m"> </div>'),va=$('<div class="app svelte-1aizo1m"><!> <!> <main><div class="container"><h1 class="svelte-1aizo1m"> </h1> <!></div></main></div>');function wa(q,C){N(C,!1);const x=()=>Z(ea,"$language",D),[D,G]=Y(),u=i(),t=i();let m=i([]),p=i(null),c=i(!0),V=i(!0);L(async()=>{try{const e=await fetch("/api/auth/me");if(e.ok){const r=await e.json();n(p,r.user)}}catch{}const s=await fetch("/api/videos?limit=50");if(s.ok){const e=await s.json();n(m,e.videos.sort((r,b)=>b.views-r.views))}n(V,!1)}),O(()=>x(),()=>{n(u,x())}),O(()=>a(u),()=>{n(t,sa[a(u)])}),P(),K();var g=va();aa("1aizo1m",s=>{U(()=>{W.title="Trending - VibeTube"})});var j=l(g);ra(j,{get user(){return a(p)},onMenuClick:()=>n(c,!a(c))});var T=y(j,2);oa(T,{get isOpen(){return a(c)},get user(){return a(p)}});var _=y(T,2);let H;var M=l(_),h=l(M),R=l(h,!0);v(h);var A=y(h,2);{var B=s=>{var e=na(),r=l(e,!0);v(e),w(()=>z(r,(a(t),f(()=>a(t).loading)))),d(s,e)},E=s=>{var e=J(),r=X(e);{var b=o=>{var k=la(),I=l(k,!0);v(k),w(()=>z(I,(a(t),f(()=>a(t).noTrendingVideos)))),d(o,k)},F=o=>{ia(o,{get videos(){return a(m)}})};S(r,o=>{a(m),f(()=>a(m).length===0)?o(b):o(F,!1)},!0)}d(s,e)};S(A,s=>{a(V)?s(B):s(E,!1)})}v(M),v(_),v(g),w(()=>{H=ta(_,1,"svelte-1aizo1m",null,H,{"sidebar-open":a(c)}),z(R,(a(t),f(()=>a(t).trending)))}),d(q,g),Q(),G()}export{wa as component};
