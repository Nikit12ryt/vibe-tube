import{c as nt,a as p,f as z}from"../chunks/b5zj641C.js";import{i as ye}from"../chunks/CPnGWO-2.js";import{o as xe}from"../chunks/Bvetg77p.js";import{f as ot,p as $e,m as v,n as x,o as t,l as ne,j as Ce,q as s,u as a,r as n,v as i,t as P,x as q,k as Te,ah as Ve,z as Ae}from"../chunks/BM2AIrRx.js";import{s as _,e as y}from"../chunks/D17zy_22.js";import{l as Mt,s as Lt,p as pe,b as Se,i as T,a as Ne}from"../chunks/BLbrYCs1.js";import{I as Vt,t as je,e as me,s as pt,b as H,r as fe,c as ge,l as Pe}from"../chunks/C02I7yOd.js";import{p as De}from"../chunks/Dt7nbsjP.js";import{H as He}from"../chunks/aIAfHqPP.js";import{S as Ee}from"../chunks/BcVKEG13.js";import{a as Ot,V as Je,f as ie}from"../chunks/DQflonDh.js";import{T as be}from"../chunks/ynn_0b1h.js";import{s as At}from"../chunks/Doq7kNre.js";import{T as Re}from"../chunks/DiCDuPrh.js";function qe(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"m15 10 5 5-5 5"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12"}]];Vt(L,Lt({name:"corner-down-right"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}function ze(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];Vt(L,Lt({name:"ellipsis-vertical"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}function re(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"}]];Vt(L,Lt({name:"heart"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}function Be(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];Vt(L,Lt({name:"pen"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}function we(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]];Vt(L,Lt({name:"pin"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}function ke(L,k){const S=Mt(k,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"M17 14V2"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"}]];Vt(L,Lt({name:"thumbs-down"},()=>S,{get iconNode(){return V},children:(A,g)=>{var r=nt(),o=ot(r);At(o,k,"default",{}),p(A,r)},$$slots:{default:!0}}))}var Ge=z('<form class="svelte-1gzk6tu"><img class="avatar svelte-1gzk6tu"/> <div class="input-wrapper svelte-1gzk6tu"><input type="text" class="svelte-1gzk6tu"/> <div class="actions svelte-1gzk6tu"><button type="button" class="svelte-1gzk6tu"> </button> <button type="submit" class="btn-primary svelte-1gzk6tu"> </button></div></div></form>'),Ue=z('<div class="pinned-badge svelte-1gzk6tu"><!> </div>'),Ze=z('<span class="heart-badge svelte-1gzk6tu"><!></span>'),Fe=z('<div class="edit-form svelte-1gzk6tu"><input type="text" class="svelte-1gzk6tu"/> <button class="btn-primary small"> </button> <button class="btn-secondary small"> </button></div>'),Ke=z('<p class="svelte-1gzk6tu"> </p>'),Qe=z('<button class="action-btn svelte-1gzk6tu"><!> </button>'),We=z('<div class="menu svelte-1gzk6tu"><button class="svelte-1gzk6tu"> </button> <button class="svelte-1gzk6tu"> </button></div>'),Xe=z('<div class="menu-wrapper svelte-1gzk6tu"><button class="action-btn svelte-1gzk6tu"><!></button> <!></div>'),Ye=z('<div class="menu svelte-1gzk6tu"><button class="svelte-1gzk6tu"><!> </button> <button class="svelte-1gzk6tu"><!> </button></div>'),ta=z('<div class="menu-wrapper svelte-1gzk6tu"><button class="action-btn svelte-1gzk6tu"><!></button> <!></div>'),ea=z('<div class="reply-form svelte-1gzk6tu"><img class="avatar small svelte-1gzk6tu"/> <input type="text" class="svelte-1gzk6tu"/> <button class="btn-primary small svelte-1gzk6tu"> </button> <button class="btn-secondary small svelte-1gzk6tu"> </button></div>'),aa=z('<span class="heart-badge svelte-1gzk6tu"><!></span>'),sa=z('<button class="action-btn svelte-1gzk6tu"><!></button>'),ia=z('<div class="comment reply svelte-1gzk6tu"><img class="avatar small svelte-1gzk6tu"/> <div class="comment-content svelte-1gzk6tu"><div class="comment-header svelte-1gzk6tu"><span class="username svelte-1gzk6tu"> </span> <span class="time svelte-1gzk6tu"> </span> <!></div> <p class="svelte-1gzk6tu"> </p> <div class="comment-actions svelte-1gzk6tu"><button><!> <span> </span></button> <button><!></button> <!></div></div></div>'),ra=z('<div class="replies svelte-1gzk6tu"></div>'),na=z('<div><!> <img class="avatar svelte-1gzk6tu"/> <div class="comment-content svelte-1gzk6tu"><div class="comment-header svelte-1gzk6tu"><span class="username svelte-1gzk6tu"> </span> <span class="time svelte-1gzk6tu"> </span> <!></div> <!> <div class="comment-actions svelte-1gzk6tu"><button><!> <span> </span></button> <button><!></button> <!> <!></div> <!> <!></div></div>'),oa=z('<div class="comments svelte-1gzk6tu"><h3 class="svelte-1gzk6tu"> </h3> <!> <div class="comments-list svelte-1gzk6tu"></div></div>');function la(L,k){$e(k,!1);const S=()=>Se(Pe,"$language",V),[V,A]=Ne(),g=x(),r=x();let o=pe(k,"videoId",8),b=pe(k,"user",8,null),N=pe(k,"videoAuthorId",8),X=x([]),E=x(""),I=x(!1),Y=x(null),j=x(""),O=x(null),J=x(new Map),zt=x(null),K=x("");xe(async()=>{await Q()});async function Q(){const u=await fetch(`/api/comments?videoId=${o()}`);if(u.ok){const e=await u.json();if(v(X,e.comments),b()){for(const h of t(X))if(await Dt(h.id),h.replies)for(const F of h.replies)await Dt(F.id)}}}async function Dt(u){if(!b())return;const e=await fetch(`/api/comments/${u}/like`);if(e.ok){const h=await e.json();h.like&&(t(J).set(u,h.like),v(J,t(J)))}}async function Ht(u){if(u.preventDefault(),!t(E).trim()||t(I))return;v(I,!0),(await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:o(),content:t(E)})})).ok&&(v(E,""),await Q()),v(I,!1)}async function Et(u){if(!t(j).trim()||t(I))return;v(I,!0),(await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:o(),content:t(j),parentId:u})})).ok&&(v(j,""),v(Y,null),await Q()),v(I,!1)}async function Nt(u,e){if(!b())return;const h=await fetch(`/api/comments/${u}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})});h.ok&&((await h.json()).action==="removed"?t(J).delete(u):t(J).set(u,e),v(J,t(J)),await Q())}async function Ut(u){(await fetch(`/api/comments/${u}/heart`,{method:"POST"})).ok&&await Q()}async function oe(u){(await fetch(`/api/comments/${u}/pin`,{method:"POST"})).ok&&await Q()}async function $(u){const e=t(g)==="ru"?"Удалить этот комментарий?":"Delete this comment?";if(!confirm(e))return;(await fetch(`/api/comments?id=${u}`,{method:"DELETE"})).ok&&await Q()}function M(u,e){v(zt,u),v(K,e)}async function D(u){if(!t(K).trim())return;(await fetch(`/api/comments?id=${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t(K)})})).ok&&(v(zt,null),v(K,""),await Q())}ne(()=>S(),()=>{v(g,S())}),ne(()=>t(g),()=>{v(r,je[t(g)])}),Ce(),ye();var U=oa(),ft=s(U),Z=s(ft);a(ft);var tt=n(ft,2);{var wt=u=>{var e=Ge(),h=s(e),F=n(h,2),et=s(F);fe(et);var yt=n(et,2),B=s(yt),lt=s(B,!0);a(B);var W=n(B,2),gt=s(W,!0);a(W),a(yt),a(F),a(e),P(vt=>{H(h,"src",(q(b()),i(()=>b().avatar))),H(h,"alt",(q(b()),i(()=>b().username))),H(et,"placeholder",(t(r),i(()=>t(r).addComment))),et.disabled=t(I),B.disabled=t(I),_(lt,(t(r),i(()=>t(r).cancel))),W.disabled=vt,_(gt,(t(r),i(()=>t(r).comment)))},[()=>(t(E),t(I),i(()=>!t(E).trim()||t(I)))]),ge(et,()=>t(E),vt=>v(E,vt)),y("click",B,()=>v(E,"")),y("submit",e,Ht),p(u,e)};T(tt,u=>{b()&&u(wt)})}var jt=n(tt,2);me(jt,5,()=>t(X),u=>u.id,(u,e)=>{var h=na();let F;var et=s(h);{var yt=d=>{var c=Ue(),f=s(c);we(f,{size:14});var l=n(f);a(c),P(()=>_(l,` ${t(r),i(()=>t(r).pinnedBy)??""}`)),p(d,c)};T(et,d=>{t(e),i(()=>t(e).is_pinned)&&d(yt)})}var B=n(et,2),lt=n(B,2),W=s(lt),gt=s(W),vt=s(gt,!0);a(gt);var Jt=n(gt,2),Zt=s(Jt,!0);a(Jt);var le=n(Jt,2);{var ve=d=>{var c=Ze(),f=s(c);re(f,{size:14,fill:"currentColor"}),a(c),p(d,c)};T(le,d=>{t(e),i(()=>t(e).is_hearted)&&d(ve)})}a(W);var Ft=n(W,2);{var de=d=>{var c=Fe(),f=s(c);fe(f);var l=n(f,2),m=s(l,!0);a(l);var w=n(l,2),C=s(w,!0);a(w),a(c),P(()=>{_(m,(t(r),i(()=>t(r).save))),_(C,(t(r),i(()=>t(r).cancel)))}),ge(f,()=>t(K),R=>v(K,R)),y("click",l,()=>D(t(e).id)),y("click",w,()=>{v(zt,null),v(K,"")}),p(d,c)},Kt=d=>{var c=Ke(),f=s(c,!0);a(c),P(()=>_(f,(t(e),i(()=>t(e).content)))),p(d,c)};T(Ft,d=>{t(zt),t(e),i(()=>t(zt)===t(e).id)?d(de):d(Kt,!1)})}var dt=n(Ft,2),bt=s(dt);let Rt;var Qt=s(bt);be(Qt,{size:16});var xt=n(Qt,2),Wt=s(xt,!0);a(xt),a(bt);var kt=n(bt,2);let Xt;var qt=s(kt);ke(qt,{size:16}),a(kt);var Pt=n(kt,2);{var ce=d=>{var c=Qe(),f=s(c);qe(f,{size:16});var l=n(f);a(c),P(()=>_(l,` ${t(r),i(()=>t(r).reply)??""}`)),y("click",c,()=>v(Y,t(Y)===t(e).id?null:t(e).id)),p(d,c)};T(Pt,d=>{b()&&d(ce)})}var Yt=n(Pt,2);{var ue=d=>{var c=nt(),f=ot(c);{var l=w=>{var C=Xe(),R=s(C),G=s(R);ze(G,{size:16}),a(R);var $t=n(R,2);{var ct=st=>{var Ct=We(),ht=s(Ct),Tt=s(ht,!0);a(ht);var ut=n(ht,2),mt=s(ut,!0);a(ut),a(Ct),P(()=>{_(Tt,(t(r),i(()=>t(r).edit))),_(mt,(t(r),i(()=>t(r).delete)))}),y("click",ht,()=>{M(t(e).id,t(e).content),v(O,null)}),y("click",ut,()=>{$(t(e).id),v(O,null)}),p(st,Ct)};T($t,st=>{t(O),t(e),i(()=>t(O)===t(e).id)&&st(ct)})}a(C),y("click",R,()=>v(O,t(O)===t(e).id?null:t(e).id)),p(w,C)},m=w=>{var C=nt(),R=ot(C);{var G=$t=>{var ct=ta(),st=s(ct),Ct=s(st);ze(Ct,{size:16}),a(st);var ht=n(st,2);{var Tt=ut=>{var mt=Ye(),it=s(mt),Bt=s(it);re(Bt,{size:16});var ae=n(Bt);a(it);var It=n(it,2),se=s(It);we(se,{size:16});var St=n(se);a(It),a(mt),P(()=>{_(ae,` ${t(e),t(r),i(()=>t(e).is_hearted?t(r).removeHeart:t(r).heartComment)??""}`),_(St,` ${t(e),t(r),i(()=>t(e).is_pinned?t(r).unpin:t(r).pinComment)??""}`)}),y("click",it,()=>{Ut(t(e).id),v(O,null)}),y("click",It,()=>{oe(t(e).id),v(O,null)}),p(ut,mt)};T(ht,ut=>{t(O),t(e),i(()=>t(O)===t(e).id)&&ut(Tt)})}a(ct),y("click",st,()=>v(O,t(O)===t(e).id?null:t(e).id)),p($t,ct)};T(R,$t=>{q(N()),q(b()),i(()=>N()===b().id)&&$t(G)},!0)}p(w,C)};T(f,w=>{q(b()),t(e),i(()=>b().id===t(e).user_id)?w(l):w(m,!1)})}p(d,c)};T(Yt,d=>{b()&&d(ue)})}a(dt);var te=n(dt,2);{var ee=d=>{var c=ea(),f=s(c),l=n(f,2);fe(l);var m=n(l,2),w=s(m,!0);a(m);var C=n(m,2),R=s(C,!0);a(C),a(c),P(G=>{H(f,"src",(q(b()),i(()=>b().avatar))),H(f,"alt",(q(b()),i(()=>b().username))),H(l,"placeholder",(t(r),i(()=>t(r).addReply))),m.disabled=G,_(w,(t(r),i(()=>t(r).reply))),_(R,(t(r),i(()=>t(r).cancel)))},[()=>(t(j),i(()=>!t(j).trim()))]),ge(l,()=>t(j),G=>v(j,G)),y("keydown",l,G=>G.key==="Enter"&&Et(t(e).id)),y("click",m,()=>Et(t(e).id)),y("click",C,()=>{v(Y,null),v(j,"")}),p(d,c)};T(te,d=>{t(Y),t(e),i(()=>t(Y)===t(e).id)&&d(ee)})}var _e=n(te,2);{var at=d=>{var c=ra();me(c,5,()=>(t(e),i(()=>t(e).replies)),f=>f.id,(f,l)=>{var m=ia(),w=s(m),C=n(w,2),R=s(C),G=s(R),$t=s(G,!0);a(G);var ct=n(G,2),st=s(ct,!0);a(ct);var Ct=n(ct,2);{var ht=_t=>{var rt=aa(),Gt=s(rt);re(Gt,{size:14,fill:"currentColor"}),a(rt),p(_t,rt)};T(Ct,_t=>{t(l),i(()=>t(l).is_hearted)&&_t(ht)})}a(R);var Tt=n(R,2),ut=s(Tt,!0);a(Tt);var mt=n(Tt,2),it=s(mt);let Bt;var ae=s(it);be(ae,{size:14});var It=n(ae,2),se=s(It,!0);a(It),a(it);var St=n(it,2);let he;var Ie=s(St);ke(Ie,{size:14}),a(St);var Oe=n(St,2);{var Me=_t=>{var rt=sa(),Gt=s(rt);{let Le=Ve(()=>(t(l),i(()=>t(l).is_hearted?"currentColor":"none")));re(Gt,{size:14,get fill(){return t(Le)}})}a(rt),y("click",rt,()=>Ut(t(l).id)),p(_t,rt)};T(Oe,_t=>{q(b()),q(N()),t(l),i(()=>b()&&N()===b().id&&t(l).user_id!==b().id)&&_t(Me)})}a(mt),a(C),a(m),P((_t,rt,Gt)=>{H(w,"src",(t(l),i(()=>t(l).avatar))),H(w,"alt",(t(l),i(()=>t(l).username))),_($t,(t(l),i(()=>t(l).username))),_(st,_t),_(ut,(t(l),i(()=>t(l).content))),Bt=pt(it,1,"action-btn svelte-1gzk6tu",null,Bt,rt),_(se,(t(l),i(()=>t(l).likes||0))),he=pt(St,1,"action-btn svelte-1gzk6tu",null,he,Gt)},[()=>(q(Ot),t(l),t(g),i(()=>Ot(t(l).created_at,t(g)))),()=>({active:t(J).get(t(l).id)==="like"}),()=>({active:t(J).get(t(l).id)==="dislike"})]),y("click",it,()=>Nt(t(l).id,"like")),y("click",St,()=>Nt(t(l).id,"dislike")),p(f,m)}),a(c),p(d,c)};T(_e,d=>{t(e),i(()=>t(e).replies&&t(e).replies.length>0)&&d(at)})}a(lt),a(h),P((d,c,f)=>{F=pt(h,1,"comment svelte-1gzk6tu",null,F,{pinned:t(e).is_pinned}),H(B,"src",(t(e),i(()=>t(e).avatar))),H(B,"alt",(t(e),i(()=>t(e).username))),_(vt,(t(e),i(()=>t(e).username))),_(Zt,d),Rt=pt(bt,1,"action-btn svelte-1gzk6tu",null,Rt,c),_(Wt,(t(e),i(()=>t(e).likes||0))),Xt=pt(kt,1,"action-btn svelte-1gzk6tu",null,Xt,f)},[()=>(q(Ot),t(e),t(g),i(()=>Ot(t(e).created_at,t(g)))),()=>({active:t(J).get(t(e).id)==="like"}),()=>({active:t(J).get(t(e).id)==="dislike"})]),y("click",bt,()=>Nt(t(e).id,"like")),y("click",kt,()=>Nt(t(e).id,"dislike")),p(u,h)}),a(jt),a(U),P(()=>_(Z,`${t(X),i(()=>t(X).length)??""} ${t(r),i(()=>t(r).comments)??""}`)),p(L,U),Te(),A()}var va=z('<div class="loading svelte-1oiicp0"> </div>'),da=z('<div class="author-actions svelte-1oiicp0"><a href="/studio/analytics" class="btn-secondary svelte-1oiicp0"><!> </a> <a class="btn-primary svelte-1oiicp0"><!> </a></div>'),ca=z("<button> </button>"),ua=z('<div class="watch-layout svelte-1oiicp0"><div class="primary svelte-1oiicp0"><div class="player svelte-1oiicp0"><video controls class="svelte-1oiicp0"><source type="video/mp4"/> <track kind="captions"/></video></div> <div class="video-info svelte-1oiicp0"><h1 class="svelte-1oiicp0"> </h1> <div class="video-meta svelte-1oiicp0"><div class="channel-info svelte-1oiicp0"><a class="channel svelte-1oiicp0"><img class="svelte-1oiicp0"/> <div><h3 class="svelte-1oiicp0"> </h3> <p class="svelte-1oiicp0"> </p></div></a> <!></div> <div class="actions svelte-1oiicp0"><button><!> </button> <button><!> </button></div></div></div> <div class="description svelte-1oiicp0"><div class="stats svelte-1oiicp0"> </div> <p class="svelte-1oiicp0"> </p></div> <!></div> <div class="secondary svelte-1oiicp0"><!></div></div>',2),_a=z('<div class="error svelte-1oiicp0"> </div>'),pa=z('<div class="app svelte-1oiicp0"><!> <!> <main><!></main></div>');function Na(L,k){$e(k,!1);const S=()=>Se(De,"$page",V),[V,A]=Ne(),g=x(),r=x();let o=x(null),b=x([]),N=x(null),X=x(!1),E=x(null),I=x(!1),Y=x(!0),j=x("en");Pe.subscribe($=>{v(j,$)}),xe(async()=>{await O()});async function O(){v(Y,!0);try{const D=await fetch("/api/auth/me");if(D.ok){const U=await D.json();v(N,U.user)}}catch{}const $=await fetch(`/api/videos/${t(r)}`);if($.ok){const D=await $.json();if(v(o,D.video),t(N)&&t(r)&&await fetch("/api/watch-history",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t(r)})}),t(N)){const U=await fetch(`/api/likes?videoId=${t(r)}`);if(U.ok){const Z=await U.json();v(E,Z.like)}const ft=await fetch(`/api/subscriptions?channelId=${t(o).user_id}`);if(ft.ok){const Z=await ft.json();v(I,Z.subscribed)}}}const M=await fetch("/api/videos?limit=10");if(M.ok){const D=await M.json();t(r)?v(b,D.videos.filter(U=>U.id!==parseInt(t(r)))):v(b,D.videos)}v(Y,!1)}async function J($){if(!t(N)){window.location.href="/login";return}const M=await fetch("/api/likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t(r),type:$})});M.ok&&((await M.json()).action==="removed"?v(E,null):v(E,$),await O())}async function zt(){if(!t(N)){window.location.href="/login";return}const $=await fetch("/api/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channelId:t(o).user_id})});if($.ok){const M=await $.json();v(I,M.subscribed),await O()}}ne(()=>t(j),()=>{v(g,je[t(j)])}),ne(()=>S(),()=>{v(r,S().params.id)}),Ce(),ye();var K=pa(),Q=s(K);He(Q,{get user(){return t(N)},onMenuClick:()=>v(X,!t(X))});var Dt=n(Q,2);Ee(Dt,{get isOpen(){return t(X)},get user(){return t(N)}});var Ht=n(Dt,2);let Et;var Nt=s(Ht);{var Ut=$=>{var M=va(),D=s(M,!0);a(M),P(()=>_(D,(t(g),i(()=>t(g).loading)))),p($,M)},oe=$=>{var M=nt(),D=ot(M);{var U=Z=>{var tt=ua(),wt=s(tt),jt=s(wt),u=s(jt),e=s(u);Ae(2),a(u),a(jt);var h=n(jt,2),F=s(h),et=s(F,!0);a(F);var yt=n(F,2),B=s(yt),lt=s(B),W=s(lt),gt=n(W,2),vt=s(gt),Jt=s(vt,!0);a(vt);var Zt=n(vt,2),le=s(Zt);a(Zt),a(gt),a(lt);var ve=n(lt,2);{var Ft=at=>{var d=da(),c=s(d),f=s(c);Re(f,{size:18});var l=n(f);a(c);var m=n(c,2),w=s(m);Be(w,{size:18});var C=n(w);a(m),a(d),P(()=>{_(l,` ${t(g),i(()=>t(g).analytics)??""}`),H(m,"href",`/studio/edit/${t(o),i(()=>t(o).id)??""}`),_(C,` ${t(g),i(()=>t(g).editVideo)??""}`)}),p(at,d)},de=at=>{var d=nt(),c=ot(d);{var f=l=>{var m=ca();let w;var C=s(m,!0);a(m),P(()=>{w=pt(m,1,"btn-primary svelte-1oiicp0",null,w,{subscribed:t(I)}),_(C,(t(I),t(g),i(()=>t(I)?t(g).subscribed:t(g).subscribe)))}),y("click",m,zt),p(l,m)};T(c,l=>{t(N)&&l(f)},!0)}p(at,d)};T(ve,at=>{t(N),t(o),i(()=>t(N)&&t(o).user_id===t(N).id)?at(Ft):at(de,!1)})}a(B);var Kt=n(B,2),dt=s(Kt);let bt;var Rt=s(dt);be(Rt,{size:20});var Qt=n(Rt);a(dt);var xt=n(dt,2);let Wt;var kt=s(xt);ke(kt,{size:20});var Xt=n(kt);a(xt),a(Kt),a(yt),a(h);var qt=n(h,2),Pt=s(qt),ce=s(Pt);a(Pt);var Yt=n(Pt,2),ue=s(Yt,!0);a(Yt),a(qt);var te=n(qt,2);la(te,{get videoId(){return t(o),i(()=>t(o).id)},get user(){return t(N)},get videoAuthorId(){return t(o),i(()=>t(o).user_id)}}),a(wt);var ee=n(wt,2),_e=s(ee);Je(_e,{get videos(){return t(b)},compact:!0}),a(ee),a(tt),P((at,d,c)=>{H(e,"src",(t(o),i(()=>t(o).video_url))),_(et,(t(o),i(()=>t(o).title))),H(lt,"href",`/channel/${t(o),i(()=>t(o).user_id)??""}`),H(W,"src",(t(o),i(()=>t(o).user_avatar))),H(W,"alt",(t(o),i(()=>t(o).username))),_(Jt,(t(o),i(()=>t(o).username))),_(le,`${at??""} ${t(g),i(()=>t(g).subscribers)??""}`),bt=pt(dt,1,"action-btn svelte-1oiicp0",null,bt,{active:t(E)==="like"}),_(Qt,` ${t(o),i(()=>t(o).likes)??""}`),Wt=pt(xt,1,"action-btn svelte-1oiicp0",null,Wt,{active:t(E)==="dislike"}),_(Xt,` ${t(o),i(()=>t(o).dislikes)??""}`),_(ce,`${d??""} ${t(g),i(()=>t(g).views)??""} • ${c??""}`),_(ue,(t(o),t(j),i(()=>t(o).description||(t(j)==="ru"?"Нет описания":"No description"))))},[()=>(q(ie),t(o),i(()=>ie(t(o).subscribers))),()=>(q(ie),t(o),i(()=>ie(t(o).views))),()=>(q(Ot),t(o),t(j),i(()=>Ot(t(o).created_at,t(j))))]),y("click",dt,()=>J("like")),y("click",xt,()=>J("dislike")),p(Z,tt)},ft=Z=>{var tt=_a(),wt=s(tt,!0);a(tt),P(()=>_(wt,t(j)==="ru"?"Видео не найдено":"Video not found")),p(Z,tt)};T(D,Z=>{t(o)?Z(U):Z(ft,!1)},!0)}p($,M)};T(Nt,$=>{t(Y)?$(Ut):$(oe,!1)})}a(Ht),a(K),P(()=>Et=pt(Ht,1,"svelte-1oiicp0",null,Et,{"sidebar-open":t(X)})),p(L,K),Te(),A()}export{Na as component};
