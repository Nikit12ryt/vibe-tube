import{f as b,a as d,c as F}from"../chunks/b5zj641C.js";import{i as I}from"../chunks/CPnGWO-2.js";import{o as J}from"../chunks/Bvetg77p.js";import{p as K,l as M,j as L,t as h,k as P,m as r,n as o,o as a,q as n,r as N,u as l,v as O,f as Q}from"../chunks/BM2AIrRx.js";import{s as S}from"../chunks/D17zy_22.js";import{i as V,a as T,b as U}from"../chunks/BLbrYCs1.js";import{t as W,s as X,l as Y}from"../chunks/C02I7yOd.js";import{H as Z}from"../chunks/aIAfHqPP.js";import{S as aa}from"../chunks/BcVKEG13.js";import{V as ea}from"../chunks/DQflonDh.js";var ta=b('<div class="loading svelte-1uha8ag"> </div>'),sa=b('<div class="empty svelte-1uha8ag"> </div>'),ra=b('<div class="app svelte-1uha8ag"><!> <!> <main><div class="container svelte-1uha8ag"><!></div></main></div>');function pa($,q){K(q,!1);const k=()=>U(Y,"$language",B),[B,C]=T(),v=o(),f=o();let u=o([]),y=o(!0),c=o(!0),m=o(null);J(async()=>{try{const e=await fetch("/api/auth/me");if(e.ok){const i=await e.json();r(m,i.user)}}catch{console.log("Not authenticated")}const t=await fetch("/api/videos");if(t.ok){const e=await t.json();r(u,e.videos)}r(y,!1)}),M(()=>k(),()=>{r(v,k())}),M(()=>a(v),()=>{r(f,W[a(v)])}),L(),I();var p=ra(),w=n(p);Z(w,{get user(){return a(m)},onMenuClick:()=>r(c,!a(c))});var x=N(w,2);aa(x,{get isOpen(){return a(c)},get user(){return a(m)}});var g=N(x,2);let j;var H=n(g),D=n(H);{var G=t=>{var e=ta(),i=n(e,!0);l(e),h(()=>S(i,(a(f),O(()=>a(f).loading)))),d(t,e)},R=t=>{var e=F(),i=Q(e);{var z=s=>{var _=sa(),E=n(_,!0);l(_),h(()=>S(E,a(v)==="ru"?"Пока нет видео. Будьте первым, кто загрузит!":"No videos yet. Be the first to upload!")),d(s,_)},A=s=>{ea(s,{get videos(){return a(u)}})};V(i,s=>{a(u),O(()=>a(u).length===0)?s(z):s(A,!1)},!0)}d(t,e)};V(D,t=>{a(y)?t(G):t(R,!1)})}l(H),l(g),l(p),h(()=>j=X(g,1,"svelte-1uha8ag",null,j,{"sidebar-open":a(c)})),d($,p),P(),C()}export{pa as component};
