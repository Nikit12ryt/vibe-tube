import{f as V,a as u,c as K}from"../chunks/b5zj641C.js";import{i as L}from"../chunks/CPnGWO-2.js";import{o as N}from"../chunks/Bvetg77p.js";import{p as W,l as w,j as X,t as f,k as Y,o as e,n as i,$ as Z,m as r,q as l,r as k,u as c,v as m,f as ee}from"../chunks/BM2AIrRx.js";import{s as x}from"../chunks/D17zy_22.js";import{i as M,a as ae,b as O}from"../chunks/BLbrYCs1.js";import{h as te}from"../chunks/DMkD6tIR.js";import{l as se,t as re,s as oe}from"../chunks/C02I7yOd.js";import{p as ie}from"../chunks/Dt7nbsjP.js";import{H as ne}from"../chunks/aIAfHqPP.js";import{S as le}from"../chunks/BcVKEG13.js";import{V as ce}from"../chunks/DQflonDh.js";var ve=V('<div class="loading svelte-e12qt1"> </div>'),de=V('<div class="empty svelte-e12qt1"> </div>'),ue=V('<div class="app svelte-e12qt1"><!> <!> <main><div class="container"><h1 class="svelte-e12qt1"> </h1> <!></div></main></div>');function xe(G,I){W(I,!1);const j=()=>O(se,"$language",R),P=()=>O(ie,"$page",R),[R,Q]=ae(),p=i(),o=i();let v=i([]),g=i(null),d=i(!0),_=i(!0),s=i("");N(async()=>{r(s,P().url.searchParams.get("q")||""),await S()});async function S(){if(e(s)){r(_,!0);try{const a=await fetch("/api/auth/me");if(a.ok){const t=await a.json();r(g,t.user)}}catch{}if(e(s)){const a=await fetch(`/api/videos?search=${encodeURIComponent(e(s))}`);if(a.ok){const t=await a.json();r(v,t.videos)}}r(_,!1)}}w(()=>j(),()=>{r(p,j())}),w(()=>e(p),()=>{r(o,re[e(p)])}),w(()=>e(s),()=>{e(s)&&typeof window<"u"&&S()}),X(),L();var h=ue();te("e12qt1",a=>{f(()=>{Z.title=`Search: ${e(s)??""} - VibeTube`},void 0,void 0,void 0,!0)});var C=l(h);ne(C,{get user(){return e(g)},onMenuClick:()=>r(d,!e(d))});var D=k(C,2);le(D,{get isOpen(){return e(d)},get user(){return e(g)}});var $=k(D,2);let F;var H=l($),b=l(H),T=l(b);c(b);var U=k(b,2);{var z=a=>{var t=ve(),q=l(t,!0);c(t),f(()=>x(q,(e(o),m(()=>e(o).searching)))),u(a,t)},A=a=>{var t=K(),q=ee(t);{var B=n=>{var y=de(),J=l(y,!0);c(y),f(()=>x(J,(e(o),m(()=>e(o).noVideosFound)))),u(n,y)},E=n=>{ce(n,{get videos(){return e(v)}})};M(q,n=>{e(v),m(()=>e(v).length===0)?n(B):n(E,!1)},!0)}u(a,t)};M(U,a=>{e(_)?a(z):a(A,!1)})}c(H),c($),c(h),f(()=>{F=oe($,1,"svelte-e12qt1",null,F,{"sidebar-open":e(d)}),x(T,`${e(o),m(()=>e(o).searchResultsFor)??""} "${e(s)??""}"`)}),u(G,h),Y(),Q()}export{xe as component};
